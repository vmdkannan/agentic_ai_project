material_selection_task:
  description: >
    Component: {temperature}°C, tolerance {tolerance}mm, industry: {topic},
    aerospace_required: {aerospace_required}.

    Call query_materials with temperature={temperature}, aerospace_required={aerospace_required}.

    Tool returns: material_name, material_type, machinability_rating
    (Easy/Moderate/Difficult/Very Difficult), tensile_strength_mpa,
    yield_strength_mpa, max_operating_temp_c, cost_per_kg.

    Select the best 2 materials from results only. Justify on:
    temperature margin, machinability cost, strength, cost, aerospace fit.
    Identify one primary recommendation.

  expected_output: >
    Valid JSON only, no markdown:
    {
      "recommended_materials": [
        {
          "material_name": "",
          "material_type": "",
          "grade": "",
          "machinability_rating": "",
          "tensile_strength_mpa": 0,
          "yield_strength_mpa": 0,
          "max_operating_temp_c": 0,
          "cost_per_kg": 0,
          "reason": "",
          "advantages": "",
          "tradeoffs": ""
        }
      ],
      "primary_material_name": "",
      "primary_material_type": "",
      "primary_machinability_rating": "",
      "comparison_summary": ""
    }
  agent: material_expert

machine_planning_task:
  description: >
    From context, extract: primary_material_name, primary_material_type,
    primary_machinability_rating.

    Call query_machines with:
      material_type = primary_material_type (e.g. 'Superalloy' — NOT the alloy name)
      required_tolerance = {tolerance}
      required_geometry = {geometry_complexity}
      required_surface_finish = {surface_finish}
      required_features = {special_features}

    If no results, retry with required_geometry and required_surface_finish as null.

    Select best machine(s) from results only. Justify on tolerance, machinability,
    geometry, surface finish, cost. Estimate time: LOW(<2h), MEDIUM(2-8h),
    HIGH(8-24h), VERY_HIGH(>24h). Note risks and mitigations.

  expected_output: >
    Valid JSON only, no markdown:
    {
      "selected_material_name": "",
      "selected_material_type": "",
      "recommended_machines": [
        {
          "machine_name": "",
          "machine_type": "",
          "reason": "",
          "operations": [],
          "tolerance_capability": "",
          "material_compatibility": "",
          "cost_per_hour": 0
        }
      ],
      "machining_strategy": "",
      "estimated_machining_time_category": "",
      "manufacturing_risk": "",
      "risk_mitigations": "",
      "planning_summary": ""
    }
  agent: machine_planner
